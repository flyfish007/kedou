webpackJsonp([33],{LM1A:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("3cXf"),o=i.n(n),a=i("Llv5"),r=i("vMJZ"),s={name:"Map",data:function(){return{value:"",show:!1,center:{lng:120.5,lat:30.2},position:{},storeList:[],infowindows:[],websock:null,type:this.$route.query.type||0,map:{},tel:this.$route.query.param?this.$route.query.param.tel:"",nickname:this.$route.query.param?this.$route.query.param.nickname:"",sex:this.$route.query.param&&this.$route.query.param.sex?this.$route.query.param.sex:"Man",email:this.$route.query.param?this.$route.query.param.email:"",registerPwd:this.$route.query.param?this.$route.query.param.registerPwd:""}},created:function(){},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId)},destroyed:function(){},computed:{},mounted:function(){this.init()},methods:{init:function(){var t=this,e=!1;setTimeout(function(){if(e)return!1;var i=114.406149,n=30.476756;t.center={lng:i,lat:n},Object(a.d)({countryCode:"ES",longitude:i,latitude:n}).then(function(e){t.storeList=e.data.result,t.mapBuild()})},2e3),this.$store.dispatch("getUserInfo").then(function(i){e=!0,t.center={lng:i.longitude,lat:i.latitude},Object(a.d)({countryCode:"ES",longitude:i.longitude,latitude:i.latitude}).then(function(e){t.storeList=e.data.result,t.mapBuild()})})},changeSort:function(t){this.sortValue=t,this.sortVisible=!1},goBack:function(){this.$router.back(-1)},mapBuild:function(){var t=this;this.map=new google.maps.Map(document.getElementById("map_canvas"),{zoom:12,center:this.center,mapTypeId:google.maps.MapTypeId.ROADMAP});var e='<div id="content"><div id="siteNotice"></div><div class="storeWrap"><div class="storeNews"><div class="storePhoto"><img src="{img}"></div><div class="right_name"><p>{storeName}</p><div class="address"><span class="iconfont red"> &#xe601; </span><div>{street}</div></div></div></div><div class="number"><div class="fansNo">Fans NO.<font>{fansNum}</font></div><div class="orderNo">Order NO.<font>{orderNum}</font></div></div><div class="btnWrap"><div class="anotherOne anotherOne_{index}" data-index="{index}" >Another One</div><div class="gotIt gotIt_{index}" data-index="{index}" >Got It</div></div></div></div></div></div>',i=void 0,n=this;this.storeList.forEach(function(o,a){var r=a;o.index=r;var s=new google.maps.InfoWindow({content:e.format(o)});console.log(r,o,s.content),(i=new google.maps.Marker({position:{lng:1*o.longitude,lat:1*o.latitude},draggable:!1,map:t.map})).addListener("click",function(){s.open(this.map,i)}),n.infowindows.push({infowindow:s,marker:i})});var a=function(){var t=1*document.querySelector(".anotherOne").attributes["data-index"].value;n.infowindows[t].infowindow.close(),n.infowindows.length>1&&n.infowindows[t==n.infowindows.length-1?0:t+1].infowindow.open(n.map,n.infowindows[t==n.infowindows.length-1?0:t+1].marker)},s=function(){var e=1*document.querySelector(".gotIt").attributes["data-index"].value,i=n.storeList[e];if(0==n.type){var a={invitationCode:i.registCode,registerPwd:t.registerPwd,tel:t.tel,nickname:t.nickname,sex:t.sex,email:t.email};n.$router.push({path:"login",query:{param:a}})}else 1==n.type?n.$router.push({path:"fillInvitation",query:{invitationCode:i.registCode}}):2==n.type?(n.$store.dispatch("changeLocation",o()(i)),n.$router.go(-1)):Object(r.b)({storeId:i.id}).then(function(t){n.$router.push({path:"/",query:{}})})};this.intervalId=setInterval(function(){if(!document.querySelector(".gotIt"))return!1;if(document.querySelector(".gotIt")){var t=document.querySelector(".gotIt");if(t.isBind)return!1;google.maps.event.addDomListener(t,"click",s),google.maps.event.addDomListener(document.querySelector(".anotherOne"),"click",a),t.isBind=!0}},100)}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("section",{staticClass:"head"},[e("div",[e("a",{staticClass:"iconfont back",on:{click:this.goBack}},[this._v(" î˜” ")])]),this._v(" "),e("h1",[this._v("Find Store")]),this._v(" "),e("div",{staticClass:"chartWrap"})]),this._v(" "),e("div",{staticStyle:{height:"100vh",width:"100%"},attrs:{id:"map_canvas"}})])},staticRenderFns:[]};var u=i("C7Lr")(s,d,!1,function(t){i("jeQr")},"data-v-d43581a2",null);e.default=u.exports},jeQr:function(t,e){}});
//# sourceMappingURL=33.877301605fd9a546e6a9.js.map
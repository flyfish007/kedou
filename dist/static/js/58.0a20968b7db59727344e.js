webpackJsonp([58],{r1NQ:function(e,t){},yUu8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("2bvH"),r=s("vMJZ"),o=s("E4LH"),c={name:"editProfile",data:function(){return{value:"",control:!1,form:{nickname:"",sex:""},gender:"",show:!1,mobile:"",email:"",userName:""}},computed:a()({},Object(n.b)(["user"])),mounted:function(){this.init()},methods:{init:function(){this.form.sex=this.user.sex?this.user.sex:1,this.gender=1==this.user.sex?"Man":"Woman",this.form.nickname=this.user.nickname?this.user.nickname:"",this.email=this.user.email?this.user.email:"",this.mobile=this.user.telephone?this.user.telephone:"",1!=this.user.modifiedName&&(this.userName=this.user.userName?this.user.userName:"")},changeSort:function(e){this.sortValue=e,this.sortVisible=!1},goBack:function(){this.$router.back(-1)},showName:function(){this.control=!0},submitEdit:function(){var e=this;if(this.form.nickname&&!Object(o.c)(this.form.nickname))return this.$toast("Nickname format must be 1-30 characters"),!1;if(this.userName&&this.userName!=this.user.userName){if(!Object(o.c)(this.userName))return this.$toast("Nickname format must be 1-30 characters"),!1;var t={userName:this.userName};Object(r.t)(t).then(function(t){if(t.data.result)return e.$toast("User name already exists"),!1;e.form.id=e.user.id,e.form.userName=e.userName,Object(r.f)(e.form).then(function(t){e.$store.dispatch("userInfo").then(function(e){}),e.$router.push("center")})})}else this.form.id=this.user.id,Object(r.f)(this.form).then(function(t){e.$store.dispatch("userInfo").then(function(e){}),e.$router.push("center")})},selectGender:function(e){this.form.sex=e,this.gender=1==this.form.sex?"Man":"Woman",this.control=!1}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",{staticClass:"head"},[s("div",[s("a",{staticClass:"iconfont back",on:{click:e.goBack}},[e._v(" î˜” ")])]),e._v(" "),s("h1",[e._v("Edit Profile")]),e._v(" "),s("div",{staticClass:"chartWrap"})]),e._v(" "),s("div",{staticClass:"formWrap"},[s("van-field",{attrs:{label:"Name"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}}),e._v(" "),s("div",{staticClass:"sex",on:{click:function(t){return e.showName()}}},[s("van-field",{attrs:{label:"Gender",disabled:"","right-icon":"arrow-down"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],staticClass:"witch"},[s("p",{class:{active:1==e.user.sex},on:{click:function(t){return t.stopPropagation(),e.selectGender(1)}}},[e._v("Man")]),e._v(" "),s("p",{class:{active:2==e.user.sex},on:{click:function(t){return t.stopPropagation(),e.selectGender(2)}}},[e._v("Women")])])],1),e._v(" "),e.show?s("p",{staticClass:"tips"},[e._v("You can change it only one time. It will be visible on Shopeone")]):e._e(),e._v(" "),s("van-field",{ref:"userName",attrs:{label:"User Name",placeHolder:1==e.user.modifiedName?e.user.userName:"",disabled:1==e.user.modifiedName},on:{blur:function(t){e.show=!1},focus:function(t){e.show=!0}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),s("div",{staticClass:"email"},[s("van-field",{attrs:{label:"Email",disabled:e.user.email},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("span",{staticClass:"change",on:{click:function(t){return e.$router.push({path:"editEmailOrMobile",query:{accountType:1,account:e.user.email?"":e.email}})}}},[e._v(e._s(e.user.email?"Change":"Add"))])],1),e._v(" "),s("div",{staticClass:"email"},[s("van-field",{attrs:{label:"Mobile",disabled:e.user.telephone},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),e._v(" "),s("span",{staticClass:"change",on:{click:function(t){return e.$router.push({path:"editEmailOrMobile",query:{accountType:2,account:e.user.telephone?"":e.mobile}})}}},[e._v(e._s(e.user.telephone?"Change":"Add"))])],1),e._v(" "),s("div",{staticClass:"submitBtn"},[s("van-button",{attrs:{type:"danger"},on:{click:e.submitEdit}},[e._v("Update Profile")])],1),e._v(" "),s("div",{staticClass:"resetWrap"},[s("span",{staticClass:"reset",on:{click:function(t){return e.$router.push("resetPwd")}}},[e._v("Reset Password")]),e._v(" "),1==e.user.level?s("span",{staticClass:"reset",on:{click:function(t){return e.$router.push("becomeVip")}}},[e._v("Becom Cooperative VIP")]):e._e()])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],staticClass:"mengban",on:{click:function(t){e.control=!1}}})])},staticRenderFns:[]};var l=s("C7Lr")(c,u,!1,function(e){s("r1NQ")},"data-v-1fa30aa3",null);t.default=l.exports}});
//# sourceMappingURL=58.0a20968b7db59727344e.js.map
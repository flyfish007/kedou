webpackJsonp([40],{EG5x:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aA9S"),i=s.n(a),n=s("4YfN"),r=s.n(n),o=s("2bvH"),c=s("UgCr"),l={name:"searchResult",data:function(){return{sortVisible:!1,query:this.$route.query,searchProductList:{},list:[],loading:!1,finished:!1,pageNumber:1,pageSize:10,sortValue:2,sortType:[{value:1,label:"Price:Low to High"},{value:2,label:"Price:High to Low"},{value:3,label:"Best Sale"},{value:4,label:"High Rated"}],showStyle:1,show:!1,toggle:{Categories:1,Brand:0},brands:[],priceRange:["",""],radioValue:-1,radioValue2:-1,isLoading:!0}},computed:r()({},Object(o.b)(["indexData","categoryOne","wishCode","wishes"])),mounted:function(){this.init()},methods:{init:function(){var t=this;Object(c.a)().then(function(e){t.brands=e.data.result.result}),this.search()},onLoad:function(){var t=this;if(this.isLoading)return this.loading=!1,!1;this.query.pageNo++;var e=this.query;Object(c.g)({name:e.searchValue,orderByVolume:e.orderByVolume,orderByPrice:e.orderByPrice,category2Code:e.category2Code,category1Code:e.category1Code,filterType:e.filterType||"1",brandId:e.brandId,pageNo:e.pageNumber,pageSize:e.pageSize,smallPrice:this.priceRange[0]||null,largePrice:this.priceRange[1]||null}).then(function(e){t.list=t.list.concat(e.data.result.result),t.loading=!1,e.data.result.totalNum<=t.list.length&&(t.finished=!0)}).catch(function(e){t.finished=!0,t.loading=!1})},onRefresh:function(){this.search()},search:function(){var t=this;this.query=i()(this.query,{pageNo:1,pageSize:10});var e=this.query;Object(c.g)({name:e.searchValue,orderByVolume:e.orderByVolume,orderByPrice:e.orderByPrice,category2Code:e.category2Code,category1Code:e.category1Code,filterType:e.filterType||"1",brandId:e.brandId,pageNo:e.pageNo,pageSize:e.pageSize,smallPrice:this.priceRange[0]||null,largePrice:this.priceRange[1]||null}).then(function(e){t.searchProductList=e.data.result,t.list=t.searchProductList.result,t.isLoading=!1,e.data.result.totalNum<=t.list.length&&(t.finished=!0)}).catch(function(e){t.finished=!0,t.isLoading=!1})},changeSort:function(t){this.query.orderByPrice="",this.query.orderByVolume="",t<3?this.query.orderByPrice=1==t?"ASC":"DESC":3==t&&(this.query.orderByVolume="DESC"),this.sortValue=t,this.sortVisible=!1,this.search()},goBack:function(){this.$router.back(-1)},changeFilter:function(t){this.$set(this.query,"filterType",t)},changeCategory:function(t){this.$set(this.query,"category1Code",t.categoryCode)},changeBrand:function(t){this.$set(this.query,"brandId",t)},addChart:function(t){this.$refs.addCart.load(t)},handlerLove:function(t){var e=this,s=this.wishCode.indexOf(t.spuCode),a=-1==s;this.$store.dispatch(a?"addWish":"deleteWish",a?{type:"spu",code:t.spuCode}:{id:this.wishes.result[s].id}).then(function(t){e.$store.dispatch("myWishes")})},resetForm:function(){this.show=!1,this.priceRange=["",""],this.$set(this.query,"brandId",""),this.$set(this.query,"category1Code","")},shareShow:function(t){this.$store.dispatch("share",{imageUrl:[t.spuMainImage],url:"proDetail?spuCode="+t.spuCode,title:t.name}).then(function(t){})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"head searchHead clearfix"},[s("div",{staticClass:"backWrap"},[s("a",{staticClass:"iconfont back",on:{click:t.goBack}},[t._v("  ")])]),t._v(" "),s("div",{staticClass:"searchHeadRight"},[s("div",{staticClass:"chartWrap"},[s("span",{staticClass:"bag"},[s("em",{staticClass:"font10"},[t._v(" "+t._s(t.indexData.shoppingCartNum)+" ")])]),t._v(" "),s("a",{staticClass:"iconfont cart",attrs:{href:"javascript:void(0)"}},[t._v("  ")])])]),t._v(" "),s("div",{staticClass:"search search2",on:{click:function(e){return t.$router.push("search")}}},[s("van-field",{attrs:{clearable:"","left-icon":"mysearch",placeholder:"What are you looking for?"},model:{value:t.query.searchValue,callback:function(e){t.$set(t.query,"searchValue",e)},expression:"query.searchValue"}})],1)]),t._v(" "),s("section",{staticClass:"operateRow"},[s("div",{staticClass:"resultNum"},[t._v(t._s(t.searchProductList.totalNum)+" Results")]),t._v(" "),s("div",{staticClass:"operate"},[s("span",{staticClass:"showStyle",on:{click:function(e){t.showStyle=1==t.showStyle?2:1}}},[s("em",{staticClass:"iconfont"},[t._v("\n          "+t._s(1==t.showStyle?"":"")+"\n        ")])]),t._v(" "),s("span",{staticClass:"sort",on:{click:function(e){t.sortVisible=!0}}},[s("em",{staticClass:"iconfont",class:{red:1==t.sortValue||3==t.sortValue}},[t._v("\n          \n        ")]),t._v(" "),s("em",{staticClass:"iconfont",class:{red:2==t.sortValue||4==t.sortValue}},[t._v("\n          \n        ")])]),t._v(" "),s("span",{staticClass:"filter",on:{click:function(e){t.show=!0}}},[s("em",{staticClass:"iconfont"},[t._v("  ")])])])]),t._v(" "),s("section",{staticClass:"downListWrap"},[t.sortVisible?s("div",{staticClass:"sortLayout"},[s("ul",t._l(t.sortType,function(e,a){return s("li",{key:a,class:{active:e.value==t.sortValue},on:{click:function(s){return t.changeSort(e.value)}}},[s("a",[t._v(t._s(e.label))])])}),0)]):t._e(),t._v(" "),t.sortVisible?s("div",{staticClass:"mask",on:{click:function(e){t.sortVisible=!1}}}):t._e(),t._v(" "),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"The end"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"commonPro"},[2==t.showStyle?s("ul",{staticClass:"clearfix Prolist"},t._l(t.list,function(e,a){return s("li",{key:a,on:{click:function(s){return t.$router.push({path:"/proDetail",query:{spuCode:e.spuCode}})}}},[s("div",{staticClass:"proBlock"},[s("div",{staticClass:"item"},[e.cutOff?s("div",{staticClass:"tips_cutOff"},[t._v("\n                    "+t._s(e.percentage)+" OFF\n                  ")]):t._e(),t._v(" "),s("div",{staticClass:"tips_love iconfont",class:{active:t.wishCode.indexOf(e.spuCode)>-1},on:{click:function(s){return s.stopPropagation(),t.handlerLove(e)}}},[t._v("\n                    "+t._s(t.wishCode.indexOf(e.spuCode)>-1?"":"")+"\n                  ")]),t._v(" "),e.sale?s("div",{staticClass:"tips_sale"}):t._e(),t._v(" "),s("img",{staticClass:"img",attrs:{src:e.spuMainImage,alt:""}})]),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                  "+t._s(e.name)+"\n                ")]),t._v(" "),s("div",{staticClass:"bottomPrice"},[s("p",{staticClass:"red"},[t._v(t._s(e.priceRange)+" AED")]),t._v(" "),s("p",{staticClass:"gray"},[t._v(t._s(e.priceRangeLine)+" AED")]),t._v(" "),1==e.isTypeFour?s("p",[t._v("Free Shipping")]):t._e()]),t._v(" "),s("div",{staticClass:"downShare"},[s("div",{class:{active:e.share},on:{click:function(s){return s.stopPropagation(),t.shareShow(e)}}},[s("span",{staticClass:"share iconfont"},[t._v("  ")])]),t._v(" "),s("div",{class:{active:e.cart},on:{click:function(s){return s.stopPropagation(),t.addChart(e)}}},[s("span",{staticClass:"cart iconfont"},[t._v("  ")])])]),t._v(" "),s("p",{staticClass:"others"},[t._v(t._s(e.sumSku)+" Other Items")])])])}),0):t._e(),t._v(" "),1==t.showStyle?s("ul",{staticClass:"clearfix turnLine"},t._l(t.list,function(e,a){return s("li",{key:a,on:{click:function(s){return t.$router.push({path:"/proDetail",query:{spuCode:e.spuCode}})}}},[e.percentage?s("div",{staticClass:"tips_cutOff"},[t._v("\n                "+t._s(e.percentage)+" OFF\n              ")]):t._e(),t._v(" "),e.sale?s("div",{staticClass:"tips_sale"}):t._e(),t._v(" "),s("div",{staticClass:"imgWrap"},[s("img",{staticClass:"img",attrs:{src:e.spuMainImage}})]),t._v(" "),s("div",{staticClass:"rightMain"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"downWrap"},[s("div",{staticClass:"bottomPrice"},[s("p",{staticClass:"red"},[t._v("\n                      "+t._s(e.priceRange)+" AED\n                      "),t._e()]),t._v(" "),s("p",{staticClass:"gray"},[t._v(t._s(e.priceRangeLine)+" AED")]),t._v(" "),1==e.isTypeFour?s("p",[t._v("Free Shipping")]):t._e()]),t._v(" "),s("div",{staticClass:"downShare"},[s("p",{staticClass:"others"},[t._v(t._s(e.sumSku)+" Other Items")]),t._v(" "),s("div",{class:{active:e.share},on:{click:function(s){return s.stopPropagation(),t.shareShow(e)}}},[s("span",{staticClass:"share iconfont"},[t._v("  ")])]),t._v(" "),s("div",{staticClass:"tips_love iconfont",class:{active:t.wishCode.indexOf(e.spuCode)>-1},on:{click:function(s){return s.stopPropagation(),t.handlerLove(e)}}},[t._v("\n                      "+t._s(t.wishCode.indexOf(e.spuCode)>-1?"":"")+"\n                    ")]),t._v(" "),s("div",{class:{active:e.cart},on:{click:function(s){return s.stopPropagation(),t.addChart(e)}}},[s("span",{staticClass:"cart iconfont"},[t._v("  ")])])])])])])}),0):t._e()])])],1)],1),t._v(" "),s("van-popup",{staticStyle:{height:"100%",width:"80%"},attrs:{position:"right"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"filterLayoutWrap"},[s("div",{staticClass:"filterLayout"},[s("div",{staticClass:"blocks"},[s("p",{staticClass:"tittle"},[s("span",[t._v(" Filters")])]),t._v(" "),s("div",{staticClass:"tags row"},[s("div",{staticClass:"col"},[s("a",{class:{active:2!=t.query.filterType},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changeFilter(1)}}},[t._v("\n                Only in Stock\n              ")])]),t._v(" "),s("div",{staticClass:"colM"}),t._v(" "),s("div",{staticClass:"col"},[s("a",{class:{active:2==t.query.filterType},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changeFilter(2)}}},[t._v("\n                Free Shipping\n              ")])])])]),t._v(" "),s("div",{staticClass:"blocks mt10"},[s("p",{staticClass:"tittle"},[s("span",[t._v("Price Range")])]),t._v(" "),s("div",{staticClass:"range row"},[s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.priceRange[0],expression:"priceRange[0]"}],staticClass:"inputTxt",attrs:{type:"number",placeholder:"Lowest Price"},domProps:{value:t.priceRange[0]},on:{input:function(e){e.target.composing||t.$set(t.priceRange,0,e.target.value)}}})]),t._v(" "),s("div",{staticClass:"colM"},[t._v("\n              —\n            ")]),t._v(" "),s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.priceRange[1],expression:"priceRange[1]"}],staticClass:"inputTxt",attrs:{type:"number",placeholder:"Highest Price"},domProps:{value:t.priceRange[1]},on:{input:function(e){e.target.composing||t.$set(t.priceRange,1,e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"blocks radioBlocks mt10"},[s("p",{staticClass:"tittle"},[s("span",[t._v("Categories")]),t._v(" "),s("span",{staticClass:"iconfont",class:{red:t.toggle.Categories},on:{click:function(e){t.toggle.Categories=!t.toggle.Categories}}},[t._v("\n              "+t._s(t.toggle.Categories?"":"")+"\n            ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle.Categories,expression:"toggle.Categories"}]},[s("ul",t._l(t.categoryOne,function(e,a){return s("li",{key:a,class:{red:t.query.category1Code==e.categoryCode},on:{click:function(s){return t.changeCategory(e)}}},[s("label",[t._v(t._s(e.categoryName))]),t._v(" "),s("span",{staticClass:"iconfont"},[t._v("\n                  "+t._s(t.query.category1Code==e.categoryCode?"":"")+"\n                ")])])}),0)])]),t._v(" "),s("div",{staticClass:"blocks radioBlocks mt10"},[s("p",{staticClass:"tittle"},[s("span",[t._v("Brand")]),t._v(" "),s("span",{staticClass:"iconfont",class:{red:t.toggle.Brand},on:{click:function(e){t.toggle.Brand=!t.toggle.Brand}}},[t._v("\n              "+t._s(t.toggle.Brand?"":"")+"\n            ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle.Brand,expression:"toggle.Brand"}]},[s("ul",t._l(t.brands,function(e,a){return s("li",{key:a,class:{red:t.query.brandId==e.id},on:{click:function(s){return t.changeBrand(e.id)}}},[s("label",[t._v(t._s(e.brandName))]),t._v(" "),s("span",{staticClass:"iconfont"},[t._v("\n                  "+t._s(t.query.brandId==e.id?"":"")+"\n                ")])])}),0)])])]),t._v(" "),s("div",{staticClass:"downBtnWrap"},[s("van-button",{attrs:{type:"danger"},on:{click:t.resetForm}},[t._v("Reset")]),t._v(" "),s("van-button",{attrs:{type:"danger"},on:{click:function(e){t.show=!1,t.search()}}},[t._v("Confirm")])],1)])]),t._v(" "),s("add-cart",{ref:"addCart"})],1)},staticRenderFns:[]};var u=s("C7Lr")(l,d,!1,function(t){s("ilQb")},"data-v-7ca2e33e",null);e.default=u.exports},ilQb:function(t,e){}});
//# sourceMappingURL=40.03d1b5f50912aca328b7.js.map
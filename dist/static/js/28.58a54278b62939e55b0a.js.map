{"version":3,"sources":["webpack:///src/components/verifyCode.vue","webpack:///./src/components/verifyCode.vue?8438","webpack:///./src/components/verifyCode.vue?fcac"],"names":["components_verifyCode","name","data","btnText","title","username","this","$route","query","type","accountType","validateCode","computed","mounted","init","methods","changeSort","val","sortValue","sortVisible","goBack","bus","$emit","submitSms","_this","undefined","$toast","Object","validate","user","email","verificationCode","then","res","$router","go","telephone","codPay","verifyCode","push","path","register","sendSms","_this2","msg","codeType","account","_this3","param","JSON","parse","extra","$store","dispatch","r","_this4","tel","order","orderNo","selectortype_template_index_0_src_components_verifyCode","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","_s","attrs","href","$event","_e","src","__webpack_require__","placeholder","clearable","model","value","callback","$$v","expression","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/28.58a54278b62939e55b0a.js","sourcesContent":["<template>\n  <div>\n    <section class=\"head\">\n      <div><a @click=\"goBack\" class=\"iconfont back\"> &#xe614; </a></div>\n      <h1>{{ title }}</h1>\n      <div class=\"chartWrap\"></div>\n    </section>\n    <div class=\"centerWrap\">\n      <div class=\"center\">\n        <span class=\"title\"\n          >{{ accountType == 2 ? \"AE +971 \" : \"\" }} {{ username }}\n          <a href=\"javascript:void(0)\" @click=\"$router.go('-1')\" v-if=\"type!='codMobile'\"\n            >(Change)</a\n          ></span\n        >\n        <p>\n          A text with a code has been sent to the number above, please enter the\n          code below.\n        </p>\n        <div class=\"emailWrap\">\n          <img src=\"../common/images/orders.png\" />\n          <van-field v-model=\"validateCode\" placeholder=\"Enter Verify Code\" type=\"number\" clearable />\n        </div>\n     \n        <van-button type=\"danger\" @click=\"submitSms\">{{ btnText }}</van-button>\n        <span class=\"again\"\n          >Didn't receive the code ?\n          <a href=\"javascript:void(0)\" @click=\"sendSms\">(Resend Code)</a></span\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { sendSms, sendEmail, verifyCode } from \"@/api/msg\";\nimport { updateEmail, updateTelephone } from \"@/api/user\";\nimport {codPay} from '@/api/order'\nimport {validateCode} from \"@/utils/validate\";\nexport default {\n  name: \"verifyMobile\",\n  data() {\n    return {\n      btnText: \"\",\n      title: \"\",\n      username: this.$route.query.username,\n      type: this.$route.query.type,\n      accountType: this.$route.query.accountType,\n      validateCode: \"\"\n    };\n  },\n  computed: {},\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      switch (this.type) {\n            case \"forget\":\n            case \"register\":\n            case \"updateEmail\":\n            case \"reMobile\":\n            case \"codMobile\":\n               this.btnText = \"Verify\";\n              break;\n            default:\n             this.btnText = \"Sign In\";\n              break;\n          }\n      if (this.accountType == 1) {\n        this.title = \"Verify Email\";\n      } else {\n        this.title = \"Verify mobile number\";\n      }\n    },\n    changeSort(val) {\n      this.sortValue = val;\n      this.sortVisible = false;\n    },\n    goBack() {\n      this.bus.$emit('goBack');;\n    },\n    submitSms() {\n      if(this.validateCode == '' || this.validateCode == undefined){\n          this.$toast(\" Verification code cannot be empty\");\n          return false;\n        }\n        if(!validateCode(this.validateCode)){\n          this.$toast(\" Verification code must be 4 digits\");\n          return false;\n        }\n      // 验证\n      if (this.type == \"updateEmail\" || this.type == \"reMobile\"||this.type=='codMobile') {\n        switch (this.type) {\n          case \"updateEmail\":\n            updateEmail({\n              email: this.username,\n              verificationCode: this.validateCode\n            }).then(res => {\n              this.$toast(\" Add Email successfully\");\n              this.$router.go(-2);\n            });\n            break;\n          case \"reMobile\":\n            updateTelephone({\n              telephone: this.username,\n              verificationCode: this.validateCode\n            }).then(res => {\n              this.$toast(\" Add Mobile successfully\");\n              this.$router.go(-2);\n            });\n            break;\n              case \"codMobile\":\n              this.codPay();\n              break;\n          default:\n            break;\n        }\n      } else {\n        this.verifyCode().then(res => {\n          switch (this.type) {\n            case \"forget\":\n              this.$router.push({\n                path: \"setPwd\",\n                query: { username: this.username }\n              });\n              break;\n            case \"register\":\n              this.register();\n              break;\n            default:\n              break;\n          }\n        });\n      }\n    },\n    sendSms() {\n      let func = this.accountType == 1 ? sendEmail : sendSms;\n      func(this.username, this.type).then(res => {\n        this.$toast(\"Code send successfully\");\n      });\n    },\n    verifyCode() {\n      return verifyCode({\n        codeType: this.type,\n        accountType: this.accountType,\n        validateCode: this.validateCode,\n        account: this.username\n      });\n    },\n    register() {\n      let param = JSON.parse(this.$route.query.extra);\n      this.$store.dispatch(\"register\", param).then(r => {\n        this.$toast(\" Sign up successfully\");\n        //this.$router.go(-2);\n        this.$router.push(\"/login\");\n      });\n    },\n    codPay(){\n        let param = JSON.parse(this.$route.query.extra);\n        param.tel=this.username;\n        param.validateCode=this.validateCode;\n        codPay(param).then(res=>{\n          this.$router.push({path:\"paySuccessful\",query:{orderNo:param.orderNo}});\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.centerWrap {\n  width: 100%;\n  padding-top: 10px;\n  background: rgba(246, 246, 246, 1);\n}\n.center {\n  width: 100%;\n  padding: 0 4%;\n  background-color: #fff;\n  font-size: 13px;\n}\n.center p {\n  width: 100%;\n  padding: 0 6%;\n  color: #666666;\n  font-size: 13px;\n}\n.title {\n  width: 100%;\n  text-align: center;\n  display: block;\n  font-size: 16px;\n  padding: 10px 0 10px 0;\n}\n.again {\n  width: 100%;\n  text-align: center;\n  display: block;\n  font-size: 12px;\n  color: #999999;\n  padding-top: 10px;\n}\n.title a {\n  font-size: 12px;\n  color: #2b87d5;\n}\n.again a {\n  color: #2b87d5;\n}\n.center .van-cell {\n  border-bottom: 1px solid #f4f4f4;\n  width: 95%;\n  padding: 10px 0;\n}\n.center .van-button--danger {\n  width: 100%;\n}\n.emailWrap {\n  width: 100%;\n  padding: 20px 6% 70px 6%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.emailWrap img {\n  width: 19px;\n  height: 19px;\n  margin-right: 5px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/verifyCode.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"head\"},[_c('div',[_c('a',{staticClass:\"iconfont back\",on:{\"click\":_vm.goBack}},[_vm._v(\"  \")])]),_vm._v(\" \"),_c('h1',[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('div',{staticClass:\"chartWrap\"})]),_vm._v(\" \"),_c('div',{staticClass:\"centerWrap\"},[_c('div',{staticClass:\"center\"},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.accountType == 2 ? \"AE +971 \" : \"\")+\" \"+_vm._s(_vm.username)+\"\\n        \"),(_vm.type!='codMobile')?_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.$router.go('-1')}}},[_vm._v(\"(Change)\")]):_vm._e()]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n        A text with a code has been sent to the number above, please enter the\\n        code below.\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"emailWrap\"},[_c('img',{attrs:{\"src\":require(\"../common/images/orders.png\")}}),_vm._v(\" \"),_c('van-field',{attrs:{\"placeholder\":\"Enter Verify Code\",\"type\":\"number\",\"clearable\":\"\"},model:{value:(_vm.validateCode),callback:function ($$v) {_vm.validateCode=$$v},expression:\"validateCode\"}})],1),_vm._v(\" \"),_c('van-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.submitSms}},[_vm._v(_vm._s(_vm.btnText))]),_vm._v(\" \"),_c('span',{staticClass:\"again\"},[_vm._v(\"Didn't receive the code ?\\n        \"),_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.sendSms}},[_vm._v(\"(Resend Code)\")])])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-f3a81f88\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/verifyCode.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f3a81f88\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./verifyCode.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./verifyCode.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./verifyCode.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f3a81f88\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./verifyCode.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f3a81f88\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/verifyCode.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
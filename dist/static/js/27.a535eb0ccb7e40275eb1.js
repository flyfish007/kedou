webpackJsonp([27],{"/nqF":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("NS8l"),o={name:"addAddress",data:function(){return{countryList:[],cityList:[],pickList:[],regionList:[],address:{},level:0,showPick:!1,value:"",checked:!1,typeIndex:0,title:"Add",id:this.$route.query.id,typeList:[{name:"None",bol:!0},{name:"Home",bol:!1},{name:"Work",bol:!1},{name:"School",bol:!1}],form:{firstName:"",lastName:"",countryName:"",countryCode:"",provinceCode:"",provinceName:"",cityCode:"",cityName:"",street:"",building:"",mobile:"",apartment:"",landmark:1,postalCode:""}}},computed:{},mounted:function(){this.init()},methods:{init:function(){var t=this;this.id&&(Object(a.f)({id:this.id}).then(function(e){t.address=e.data.result,t.form=t.address,t.typeIndex=t.form.landmark-1}),this.title="Edit"),Object(a.c)().then(function(e){t.countryList=e.data.result,t.form.countryCode=t.countryList[0].countryCode,t.form.countryName=t.countryList[0].countryName,Object(a.b)({countryCode:t.form.countryCode,parentCode:0}).then(function(e){t.cityList=e.data.result})})},changeSort:function(t){this.sortValue=t,this.sortVisible=!1},goBack:function(){this.$router.back(-1)},confirm:function(){var t=this,e=this.form.id?a.e:a.a;this.form.addressType=this.checked?1:0,e(this.form).then(function(e){t.$toast("Save address successfully"),t.$router.back(-1)})},onChange:function(){},showPicker:function(t){switch(this.level=t,t){case 0:this.pickList=this.countryList.map(function(t){return t.countryName});break;case 1:this.pickList=this.cityList.map(function(t){return t.regionName});break;case 2:this.pickList=this.regionList.map(function(t){return t.regionName})}this.showPick=!0},onCancel:function(){this.showPick=!1},onConfirm:function(t,e){var i=this;switch(this.showPick=!1,this.level){case 0:this.form.countryCode=this.countryList[e].countryCode,this.form.countryName=this.countryList[e].countryName;break;case 1:this.form.provinceCode=this.cityList[e].regionCode,this.form.provinceName=t,Object(a.b)({countryCode:this.form.countryCode,parentCode:this.form.provinceCode}).then(function(t){i.regionList=t.data.result}),console.log(this.regionList);break;case 2:this.form.cityCode=this.regionList[e].regionCode,this.form.cityName=t}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",{staticClass:"head"},[i("div",[i("a",{staticClass:"iconfont back",on:{click:t.goBack}},[t._v("  ")])]),t._v(" "),i("h1",[t._v(t._s(t.title)+" Address Information")]),t._v(" "),i("div",{staticClass:"chartWrap"},[i("a",{staticClass:"iconfont cart",on:{click:function(e){return t.$router.push("cart")}}},[t._v("  ")])])]),t._v(" "),i("div",{staticClass:"inputWrap"},[i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("First Name"),i("font",[t._v("*")])],1),t._v(" "),i("van-field",{model:{value:t.form.firstName,callback:function(e){t.$set(t.form,"firstName",e)},expression:"form.firstName"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("Last Name"),i("font",[t._v("*")])],1),t._v(" "),i("van-field",{model:{value:t.form.lastName,callback:function(e){t.$set(t.form,"lastName",e)},expression:"form.lastName"}})],1),t._v(" "),i("div",{staticClass:"country"},[i("div",{staticClass:"coat_left"},[i("div",{staticClass:"label"},[t._v("Country")]),t._v(" "),i("van-field",{attrs:{readonly:!0,required:!0,"right-icon":"arrow-down"},on:{click:function(e){return t.showPicker(0)}},model:{value:t.form.countryName,callback:function(e){t.$set(t.form,"countryName",e)},expression:"form.countryName"}})],1),t._v(" "),i("div",{staticClass:"coat_right"},[i("div",{staticClass:"label"},[t._v("City")]),t._v(" "),i("van-field",{attrs:{readonly:!0,required:!0,"right-icon":"arrow-down"},on:{click:function(e){return t.showPicker(1)}},model:{value:t.form.provinceName,callback:function(e){t.$set(t.form,"provinceName",e)},expression:"form.provinceName"}})],1)]),t._v(" "),i("div",{staticClass:"region"},[i("div",{staticClass:"label"},[t._v("Region")]),t._v(" "),i("van-field",{attrs:{readonly:!0,required:!0,"right-icon":"arrow-down"},on:{click:function(e){return t.showPicker(2)}},model:{value:t.form.cityName,callback:function(e){t.$set(t.form,"cityName",e)},expression:"form.cityName"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("Street and Building")]),t._v(" "),i("van-field",{attrs:{required:!0},model:{value:t.form.street,callback:function(e){t.$set(t.form,"street",e)},expression:"form.street"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("Postal Code")]),t._v(" "),i("van-field",{attrs:{required:!0},model:{value:t.form.postalCode,callback:function(e){t.$set(t.form,"postalCode",e)},expression:"form.postalCode"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("Apartment and Floor")]),t._v(" "),i("van-field",{model:{value:t.form.apartment,callback:function(e){t.$set(t.form,"apartment",e)},expression:"form.apartment"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"label"},[t._v("Nearest Landmark")]),t._v(" "),i("van-field",{model:{value:t.form.building,callback:function(e){t.$set(t.form,"building",e)},expression:"form.building"}})],1),t._v(" "),i("div",{staticClass:"comment"},[i("p",[t._v("Address Type")]),t._v(" "),t._l(t.typeList,function(e,a){return i("div",{key:e.name,class:[{red:t.typeIndex==a},"setmeal"],on:{click:function(e){t.typeIndex=a,t.form.landmark=a+1}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),i("div",{staticStyle:{clear:"both"}})],2),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"codeName"},[t._v("+97")]),t._v(" "),i("div",{staticClass:"label"},[t._v("Mobile Number"),i("font",[t._v("*")])],1),t._v(" "),i("van-field",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),i("div",{staticClass:"coat"},[i("div",{staticClass:"codeName"},[t._v("+97")]),t._v(" "),i("div",{staticClass:"label"},[t._v("Landline Number")]),t._v(" "),i("van-field",{model:{value:t.form.landlineNumber,callback:function(e){t.$set(t.form,"landlineNumber",e)},expression:"form.landlineNumber"}})],1),t._v(" "),i("van-checkbox",{attrs:{"checked-color":"red"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("Set as default address")]),t._v(" "),i("van-button",{attrs:{type:"danger"},on:{click:t.confirm}},[t._v("Save Address")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPick,expression:"showPick"}],staticClass:"pickerWrap",on:{click:function(e){t.showPick=!1}}}),t._v(" "),i("div",{staticClass:"picker"},[i("van-picker",{directives:[{name:"show",rawName:"v-show",value:t.showPick,expression:"showPick"}],ref:"picker",attrs:{columns:t.pickList,"show-toolbar":""},on:{change:t.onChange,cancel:t.onCancel,confirm:t.onConfirm}})],1)])},staticRenderFns:[]};var n=i("C7Lr")(o,s,!1,function(t){i("yo/J"),i("zTaA")},"data-v-0471a8f8",null);e.default=n.exports},"yo/J":function(t,e){},zTaA:function(t,e){}});
//# sourceMappingURL=27.a535eb0ccb7e40275eb1.js.map
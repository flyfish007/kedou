webpackJsonp([42],{bKE9:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("4YfN"),e=i.n(a),n=i("2bvH"),c=i("qSrn"),r={name:"flashSale",data:function(){return{pageNo:1,pageSize:10,loading:!1,finished:!1,isLoading:!0,productList1:[],productList2:[],productList3:[],latestTime:[],remainTime:[{},{},{}],timer:{d:"00",h:"00",m:"00",s:"00"},tabIdx:1}},computed:e()({},Object(n.b)(["indexData"])),mounted:function(){this.init()},methods:{init:function(){var t=this;this.pageNo=1;var s=new Date;s.setDate(s.getDate()+1),this.latestTime.push(s.getMonth()+1+"/"+s.getDate()),s.setDate(s.getDate()+1),this.latestTime.push(s.getMonth()+1+"/"+s.getDate()),Object(c.c)(this.pageNo,this.pageSize).then(function(s){s=s.data.result.result,t.productList1=s[0].productList,t.productList2=s[1].productList,t.productList3=s[2].productList,t.remainTime[0].remain=1*s[0].endTimeStr,t.remainTime[1].remain=1*s[1].beginTimeStr,t.remainTime[2].remain=1*s[2].beginTimeStr,t.timeoutId&&clearTimeout(t.timeoutId),t.countTime(),t.isLoading=!1,s.data.result.totalNum<=t.result.length&&(t.finished=!0)}).catch(function(s){t.finished=!0,t.isLoading=!1})},countTime:function(){var t=this;this.remainTime.forEach(function(s,i){var a=s.remain;a>=0&&(s.h=t.timeStr(Math.floor(a/60/60)>99?99:Math.floor(a/60/60)),s.m=t.timeStr(Math.floor(a/60%60)),s.s=t.timeStr(Math.floor(a%60)),s.remain=s.remain-1,t.$set(t.remainTime,i,s))}),this.timeoutId=setTimeout(this.countTime,1e3)},onLoad:function(){var t=this;if(this.isLoading)return this.loading=!1,!1;this.pageNo++,Object(c.c)(this.pageNo,this.pageSize).then(function(s){s=s.data.result.result,t.productList1=t.productList1.concat(s[0].productList),t.productList2=t.productList2.concat(s[1].productList),t.productList3=t.productList3.concat(s[2].productList),t.isLoading=!1,s.data.result.totalNum<=t.result.length&&(t.finished=!0)}).catch(function(s){t.finished=!0,t.loading=!1})},onRefresh:function(t){var s=this;setTimeout(function(){s.init(),t()},500)},timeStr:function(t){return t<10?"0"+t:t},goBack:function(){this.$router.back(-1)},goCart:function(){this.$router.push({path:"/cart",query:{}})}}},o={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("section",{staticClass:"head"},[i("div",[i("a",{staticClass:"iconfont back",on:{click:t.goBack}},[t._v("  ")]),t._v(" "),i("a",{staticClass:"icon icon_manue",on:{click:function(s){return t.bus.$emit("showDrawer")}}},[t._v(" manue ")])]),t._v(" "),i("h1",[t._v("flash-sales")]),t._v(" "),i("div",{staticClass:"chartWrap"},[i("router-link",{attrs:{to:{path:"/search",query:{}}}},[i("span",{staticClass:"search iconfont"},[t._v("  ")])]),t._v(" "),t.indexData.shoppingCartNum>0?i("span",{staticClass:"bag"},[i("em",{staticClass:"font10"},[t._v(" "+t._s(t.indexData.shoppingCartNum)+" ")])]):t._e(),t._v(" "),i("a",{staticClass:"iconfont cart",attrs:{href:"javascript:void(0)"},on:{click:t.goCart}},[t._v("\n        \n      ")])],1)]),t._v(" "),i("section",{staticClass:"tabNav"},[i("div",{class:{activeTab:1==t.tabIdx},on:{click:function(s){t.tabIdx=1}}},[i("p",[t._v("24:00")]),t._v(" "),i("p",[t._v("On going")])]),t._v(" "),i("div",{class:{activeTab:2==t.tabIdx},on:{click:function(s){t.tabIdx=2}}},[i("p",[t._v(t._s(t.latestTime[0]))]),t._v(" "),i("p",[t._v("24:00")])]),t._v(" "),i("div",{class:{activeTab:3==t.tabIdx},on:{click:function(s){t.tabIdx=3}}},[i("p",[t._v(t._s(t.latestTime[1]))]),t._v(" "),i("p",[t._v("24:00")])])]),t._v(" "),1==t.tabIdx?i("section",{staticClass:"topTimerWrap"},[i("div",{staticClass:"tittle"},[t._v("\n      Hot sales\n    ")]),t._v(" "),i("div",{staticClass:"timerWrap"},[i("span",{staticClass:"black"},[t._v("Ends in")]),t._v(" "),i("div",{staticClass:"timer"},[i("span",[t._v(" "+t._s(t.remainTime[0].h||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[0].m||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[0].s||"00")+" ")])])])]):t._e(),t._v(" "),2==t.tabIdx?i("section",{staticClass:"topTimerWrap"},[i("div",{staticClass:"tittle"},[t._v("\n      Hot sales\n    ")]),t._v(" "),i("div",{staticClass:"timerWrap"},[i("span",{staticClass:"black"},[t._v("Starts in")]),t._v(" "),i("div",{staticClass:"timer"},[i("span",[t._v(" "+t._s(t.remainTime[1].h||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[1].m||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[1].s||"00")+" ")])])])]):t._e(),t._v(" "),3==t.tabIdx?i("section",{staticClass:"topTimerWrap"},[i("div",{staticClass:"tittle"},[t._v("\n      Hot sales\n    ")]),t._v(" "),i("div",{staticClass:"timerWrap"},[i("span",{staticClass:"black"},[t._v("Starts in")]),t._v(" "),i("div",{staticClass:"timer"},[i("span",[t._v(" "+t._s(t.remainTime[2].h||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[2].m||"00")+" ")]),t._v(" :\n        "),i("span",[t._v(" "+t._s(t.remainTime[2].s||"00")+" ")])])])]):t._e(),t._v(" "),1==t.tabIdx?i("section",{staticClass:"flashProList"},[i("vx-pull-refresh",{on:{refresh:t.onRefresh}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"The end"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[i("ul",{staticClass:"clearfix"},t._l(t.productList1,function(s,a){return i("li",{key:a},["0%"!=s.discountRate?i("div",{staticClass:"tips_cutOff"},[t._v("\n              "+t._s(s.discountRate)+" OFF\n            ")]):t._e(),t._v(" "),i("div",{staticClass:"imgWrap"},[i("img",{staticClass:"img",attrs:{src:s.spuMainImage}})]),t._v(" "),i("div",{staticClass:"rightMain"},[i("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"priceWrap"},[i("p",{staticClass:"red"},[t._v(t._s(s.priceRange)+" AED")]),t._v(" "),i("p",{staticClass:"gray",staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(s.priceRangeLine)+" AED")])]),t._v(" "),i("div",{staticClass:"flashDownWrap"},[i("div",{staticClass:"bottomPrice"},[i("div",{staticClass:"process"},[i("p",{staticClass:"activeBar",style:{width:s.soldRate}}),t._v(" "),i("span",{staticClass:"rightTips font10"},[t._v("\n                      "+t._s(s.soldRate)+" sold\n                    ")])])]),t._v(" "),i("div",[i("van-button",{attrs:{type:"danger"},on:{click:function(i){return t.$router.push({path:"proDetail",query:{spuCode:s.spuCode,from:"falshSale"}})}}},[t._v("Shop Now")])],1)])])])}),0)])],1)],1):t._e(),t._v(" "),2==t.tabIdx?i("section",{staticClass:"flashProList"},[i("vx-pull-refresh",{on:{refresh:t.onRefresh}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"The end"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[i("ul",{staticClass:"clearfix"},t._l(t.productList2,function(s,a){return i("li",{key:a},["0%"!=s.discountRate?i("div",{staticClass:"tips_cutOff"},[t._v("\n              "+t._s(s.discountRate)+" OFF\n            ")]):t._e(),t._v(" "),i("div",{staticClass:"imgWrap"},[i("img",{staticClass:"img",attrs:{src:s.spuMainImage}})]),t._v(" "),i("div",{staticClass:"rightMain"},[i("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"priceWrap"},[i("p",{staticClass:"red"},[t._v(t._s(s.priceRange)+" AED")]),t._v(" "),i("p",{staticClass:"gray",staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(s.priceRangeLine)+" AED")])]),t._v(" "),i("div",{staticClass:"flashDownWrap"},[i("div",{staticClass:"bottomPrice"},[i("div",{staticClass:"process"},[i("p",{staticClass:"activeBar",style:{width:100*s.soldRate}}),t._v(" "),i("span",{staticClass:"rightTips font10"},[t._v("\n                      Only "+t._s(s.num)+"\n                    ")])])]),t._v(" "),i("div",[i("van-button",{attrs:{type:"danger"},on:{click:function(i){return t.$router.push({path:"proDetail",query:{spuCode:s.spuCode}})}}},[t._v("See It")])],1)])])])}),0)])],1)],1):t._e(),t._v(" "),3==t.tabIdx?i("section",{staticClass:"flashProList"},[i("vx-pull-refresh",{on:{refresh:t.onRefresh}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"The end"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[i("ul",{staticClass:"clearfix"},t._l(t.productList3,function(s,a){return i("li",{key:a},["0%"!=s.discountRate?i("div",{staticClass:"tips_cutOff"},[t._v("\n              "+t._s(s.discountRate)+" OFF\n            ")]):t._e(),t._v(" "),i("div",{staticClass:"imgWrap"},[i("img",{staticClass:"img",attrs:{src:s.spuMainImage}})]),t._v(" "),i("div",{staticClass:"rightMain"},[i("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"priceWrap"},[i("p",{staticClass:"red"},[t._v(t._s(s.priceRange)+" AED")]),t._v(" "),i("p",{staticClass:"gray",staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(s.priceRangeLine)+" AED")])]),t._v(" "),i("div",{staticClass:"flashDownWrap"},[i("div",{staticClass:"bottomPrice"},[i("div",{staticClass:"process"},[i("p",{staticClass:"activeBar",style:{width:100*s.soldRate}}),t._v(" "),i("span",{staticClass:"rightTips font10"},[t._v("\n                      Only "+t._s(s.num)+"\n                    ")])])]),t._v(" "),i("div",[i("van-button",{attrs:{type:"danger"},on:{click:function(i){return t.$router.push({path:"proDetail",query:{spuCode:s.spuCode}})}}},[t._v("See It")])],1)])])])}),0)])],1)],1):t._e()])},staticRenderFns:[]};var l=i("C7Lr")(r,o,!1,function(t){i("oR6o")},"data-v-6b9cc070",null);s.default=l.exports},oR6o:function(t,s){}});
//# sourceMappingURL=42.8f5b1827bd2b569e5e7b.js.map
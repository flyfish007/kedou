webpackJsonp([45],{rykO:function(e,s){},yUu8:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("4YfN"),n=t.n(i),a=t("2bvH"),r=t("vMJZ"),o=(t("Llv5"),t("E4LH")),c={name:"editProfile",data:function(){return{value:"",control:!1,form:{nickname:"",sex:""},gender:"",show:!1,mobile:"",email:"",userName:"",hasStore:""}},computed:n()({},Object(a.b)(["user"])),mounted:function(){this.init()},methods:{init:function(){console.log(this.user.level),this.form.sex=this.user.sex?this.user.sex:1,this.gender=1==this.user.sex?"Men":"Women",this.form.nickname=this.user.nickname?this.user.nickname:"",this.email=this.user.email?this.user.email:"",this.mobile=this.user.telephone?this.user.telephone:"",1!=this.user.modifiedName&&(this.userName=this.user.userName?this.user.userName:"")},changeSort:function(e){this.sortValue=e,this.sortVisible=!1},goBack:function(){this.bus.$emit("goBack")},showName:function(){this.control=!0},submitEdit:function(){var e=this;if(this.form.nickname&&!Object(o.c)(this.form.nickname))return this.$toast("Nickname format must be 1-30 characters"),!1;if(this.userName&&this.userName!=this.user.userName){if(!Object(o.c)(this.userName))return this.$toast("Nickname format must be 1-30 characters"),!1;var s={userName:this.userName};Object(r.v)(s).then(function(s){if(s.data.result)return e.$toast("User name already exists"),!1;e.form.id=e.user.id,e.form.userName=e.userName,Object(r.f)(e.form).then(function(s){e.$store.dispatch("userInfo").then(function(e){}),e.$router.push("center")})})}else this.form.id=this.user.id,Object(r.f)(this.form).then(function(s){e.$store.dispatch("userInfo").then(function(e){}),e.$router.push("center")})},selectGender:function(e){this.form.sex=e,this.gender=1==this.form.sex?"Men":"Women",this.control=!1}}},l={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("section",{staticClass:"head"},[t("div",[t("a",{staticClass:"iconfont back",on:{click:e.goBack}},[e._v(" î˜” ")])]),e._v(" "),t("h1",[e._v("Edit Profile")]),e._v(" "),t("div",{staticClass:"chartWrap"})]),e._v(" "),t("div",{staticClass:"formWrap"},[t("van-field",{attrs:{label:"Name"},model:{value:e.form.nickname,callback:function(s){e.$set(e.form,"nickname",s)},expression:"form.nickname"}}),e._v(" "),t("div",{staticClass:"sex",on:{click:function(s){return e.showName()}}},[t("van-field",{attrs:{label:"Gender",disabled:"","right-icon":"arrow-down"},model:{value:e.gender,callback:function(s){e.gender=s},expression:"gender"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],staticClass:"witch"},[t("p",{class:{active:1==e.user.sex},on:{click:function(s){return s.stopPropagation(),e.selectGender(1)}}},[e._v("Men")]),e._v(" "),t("p",{class:{active:2==e.user.sex},on:{click:function(s){return s.stopPropagation(),e.selectGender(2)}}},[e._v("Women")])])],1),e._v(" "),e.show?t("p",{staticClass:"tips"},[e._v("You can change it only one time. It will be visible on Shopeone")]):e._e(),e._v(" "),t("van-field",{ref:"userName",attrs:{label:"User Name",placeHolder:1==e.user.modifiedName?e.user.userName:"",disabled:1==e.user.modifiedName},on:{blur:function(s){e.show=!1},focus:function(s){e.show=!0}},model:{value:e.userName,callback:function(s){e.userName=s},expression:"userName"}}),e._v(" "),t("div",{staticClass:"email"},[t("van-field",{attrs:{label:"Email",disabled:e.user.email},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}}),e._v(" "),t("span",{staticClass:"change",on:{click:function(s){return e.$router.push({path:"editEmailOrMobile",query:{accountType:1,account:e.user.email?"":e.email}})}}},[e._v(e._s(e.user.email?"Change":"Add"))])],1),e._v(" "),t("div",{staticClass:"email"},[t("van-field",{attrs:{label:"Mobile",disabled:e.user.telephone},model:{value:e.mobile,callback:function(s){e.mobile=s},expression:"mobile"}}),e._v(" "),t("span",{staticClass:"change",on:{click:function(s){return e.$router.push({path:"editEmailOrMobile",query:{accountType:2,account:e.user.telephone?"":e.mobile}})}}},[e._v(e._s(e.user.telephone?"Change":"Add"))])],1),e._v(" "),t("div",{staticClass:"submitBtn"},[t("van-button",{attrs:{type:"danger"},on:{click:e.submitEdit}},[e._v("Update Profile")])],1),e._v(" "),t("div",{staticClass:"resetWrap"},[t("span",{staticClass:"reset",on:{click:function(s){return e.$router.push("resetPwd")}}},[e._v("Reset Password")]),e._v(" "),1!=e.user.level?t("span",{staticClass:"reset",on:{click:function(s){return e.$router.push("becomeVip")}}},[e._v("Become Cooperative VIP")]):e._e()])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],staticClass:"mengban",on:{click:function(s){e.control=!1}}})])},staticRenderFns:[]};var u=t("C7Lr")(c,l,!1,function(e){t("rykO")},"data-v-59862434",null);s.default=u.exports}});
//# sourceMappingURL=45.ff9cbc717b5ca89f9c6a.js.map
webpackJsonp([46],{aiqZ:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("aA9S"),a=i.n(e),n=i("4YfN"),o=i.n(n),r=(i("vMJZ"),i("2bvH")),c={name:"browseRecord",data:function(){return{list:{},sortVisible:!1,searchValue:"",sortValue:2,query:{},loading:!1,finished:!1,isLoading:!0,sortType:[{value:1,label:"Price:Low to High"},{value:2,label:"Price:High to Low"},{value:3,label:"Best Sale"},{value:4,label:"High Rated"}],showStyle:1,show:!1,toggle:{Categories:1,Brand:0},priceRange:["",""],radioValue:1,radioValue2:1}},computed:o()({},Object(r.b)(["indexData"])),mounted:function(){this.init()},methods:{init:function(){var t=this;this.query=a()(this.query,{pageNo:1,pageSize:10}),this.$store.dispatch("getUserBrowseProduct",this.query).then(function(s){t.list=s,t.isLoading=!1,0==s.length&&(t.finished=!0)}).catch(function(s){t.finished=!0,t.isLoading=!1})},onLoad:function(){var t=this;if(console.log(1),this.isLoading)return this.loading=!1,!1;this.query.pageNo++,this.$store.dispatch("getUserBrowseProduct",this.query).then(function(s){t.list=t.list.concat(s),t.loading=!1,0==s.length&&(t.finished=!0)}).catch(function(s){t.finished=!0,t.loading=!1})},onRefresh:function(t){var s=this;setTimeout(function(){s.init(),t()},500)},changeSort:function(t){this.sortValue=t,this.sortVisible=!1},goBack:function(){this.$router.back(-1)},addChart:function(t){this.$refs.addCart.load(t)},deleteRecord:function(t,s){var i=this;this.$store.dispatch("deleteUserBrowseProduct",{index:s,id:t.id}).then(function(t){i.init()})},shareShow:function(t){this.$store.dispatch("share",{imageUrl:[t.spuMainImage],url:"proDetail?spuCode="+t.spuCode,title:t.name}).then(function(t){})},getStr:function(t){var s=t.indexOf("-");return-1!=s?t.substring(0,s-1):t}}},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("section",{staticClass:"head"},[i("div",[i("a",{staticClass:"iconfont back",on:{click:t.goBack}},[t._v("  ")])]),t._v(" "),i("h1",[t._v("Browse record")]),t._v(" "),i("div",{staticClass:"chartWrap"},[i("a",{staticClass:"iconfont cart",on:{click:function(s){return t.$router.push("/cart")}}},[t._v("  ")]),t._v(" "),t.indexData.shoppingCartNum>0?i("span",{staticClass:"bag"},[i("em",{staticClass:"font10"},[t._v(" "+t._s(t.indexData.shoppingCartNum)+" ")])]):t._e()])]),t._v(" "),i("vx-pull-refresh",{on:{refresh:t.onRefresh}},[i("section",{staticClass:"downListWrap"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"The end"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[i("div",{staticClass:"commonPro"},[i("ul",{staticClass:"clearfix",class:{turnLine:1==t.showStyle,Prolist:2==t.showStyle}},t._l(t.list,function(s,e){return i("li",{key:e,on:{click:function(i){return t.$router.push({path:"proDetail",query:{spuCode:s.spuCode}})}}},["0%"!=s.percentage?i("div",{staticClass:"tips_cutOff"},[t._v("\n                  "+t._s(s.percentage)+" OFF\n                ")]):t._e(),t._v(" "),s.sale?i("div",{staticClass:"tips_sale"}):t._e(),t._v(" "),i("div",{staticClass:"imgWrap"},[i("img",{staticClass:"img",attrs:{src:s.spuMainImage}})]),t._v(" "),i("div",{staticClass:"rightMain"},[i("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"downWrap"},[i("div",{staticClass:"bottomPrice"},[i("p",{staticClass:"red"},[t._v(t._s(t.getStr(s.priceRange))+" AED")]),t._v(" "),i("p",{staticClass:"gray"},[t._v(t._s(t.getStr(s.priceRangeLine))+" AED")]),t._v(" "),1==s.isTypeFour?i("p",[t._v("Free Shipping")]):t._e()]),t._v(" "),i("div",{staticClass:"downShare"},[i("p",{staticClass:"others"},[t._v(t._s(s.sumSku)+" Other Items")]),t._v(" "),i("div",{class:{active:s.cart},on:{click:function(i){return i.stopPropagation(),t.addChart(s)}}},[i("span",{staticClass:"cart iconfont"},[t._v("  ")])]),t._v(" "),i("div",{class:{active:s.share},on:{click:function(i){return i.stopPropagation(),t.shareShow(s)}}},[i("span",{staticClass:"share iconfont"},[t._v("  ")])]),t._v(" "),i("div",{class:{active:s.share},on:{click:function(i){return i.stopPropagation(),t.deleteRecord(s,e)}}},[i("span",{staticClass:"share iconfont"},[t._v("  ")])])])])])])}),0)])])],1)]),t._v(" "),i("add-cart",{ref:"addCart"})],1)},staticRenderFns:[]};var d=i("C7Lr")(c,l,!1,function(t){i("rQl+")},"data-v-61cc628d",null);s.default=d.exports},"rQl+":function(t,s){}});
//# sourceMappingURL=46.2066b00e375813d144a7.js.map
webpackJsonp([29],{K9xa:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("fZjL"),a=s.n(i),n=s("BO1k"),o=s.n(n),c=s("Dd8w"),r=s.n(c),l=s("7odv"),p=s("NYxO"),u=s("UgCr"),d={name:"proDetail",components:{shareModel:l.default},data:function(){return{shareBol:!1,btnFlag:!1,skuCode:null,num:1,hasTimer:!1,colorSelect:null,sizeSelect:null,spuCode:this.$route.query.spuCode,bannerSwiperOption:{autoplay:!0,loop:!0,slidesPerView:1,spaceBetween:0,centeredSlides:!0,pagination:{el:".swiper-pagination",type:"fraction"}},commonSwiperOption:{slidesPerView:2.3,spaceBetween:10,freeMode:!0},reviewsSwiperOption:{loop:!0,slidesPerView:1.2,spaceBetween:10,pagination:{el:".swiper-pagination",clickable:!0}},timer:{d:"00",h:"00",m:"00",s:"00",remain:0},starNum:4.5,isVIP:!1,DescriptionOpen:!1,SpecificationsOpen:!1,productDetail:{},attributeList:[],atrributeMap:{},selectIndex:[0,"-",0],selectSku:null,latestDay:null}},computed:r()({},Object(p.b)(["user","indexData","wishCode","wishes","countryCode"])),mounted:function(){window.addEventListener("scroll",this.scrollToTop),this.init(),this.isVIP=this.user.level>1},destroyed:function(){window.removeEventListener("scroll",this.scrollToTop)},methods:{init:function(){var t=this;this.$store.dispatch("getProDetailBySpuCode",{spuCode:this.spuCode}).then(function(e){t.productDetail=e,1==t.productDetail.flashType&&(t.timer.remain=1*t.productDetail.endTimeStr,t.countTime());t.productDetail.productSkuList.map(function(e){JSON.parse(e.attributeJson).forEach(function(s){var i=!0,n=!1,c=void 0;try{for(var r,l=o()(a()(s));!(i=(r=l.next()).done);i=!0){var p=r.value;t.attributeList.push(p+"-"+s[p]),t.atrributeMap[p+"-"+s[p]]=e}}catch(t){n=!0,c=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw c}}})})}).catch(function(t){console.log(t)}),this.countryCode&&Object(u.j)({cityCode:this.countryCode.cityCode}).then(function(e){t.latestDay=e.data.result.latestDay})},countTime:function(){var t=this.timer.remain;t>=0&&(this.timer.d=this.timeStr(Math.floor(t/60/60/24)),this.timer.h=this.timeStr(Math.floor(t/60/60%24)),this.timer.m=this.timeStr(Math.floor(t/60%60)),this.timer.s=this.timeStr(Math.floor(t%60)),this.timer.remain=this.timer.remain-1),setTimeout(this.countTime,1e3)},timeStr:function(t){return t<10?"0"+t:t},goBack:function(){this.$router.back(-1)},chooseDetail:function(t){var e=this.$refs.bestShareSwiper.swiper.clickedIndex;this.goDetail(this.productDetail.proListCate2[e].spuCode)},goDetail:function(t){this.$router.push({path:"/proDetail",query:{spuCode:t}})},commentGo:function(){this.$router.push({path:"/reviewsList",query:{spuCode:this.spuCode}})},jia:function(){this.num++},jian:function(){this.num--,this.num<=1&&(this.num=1)},selectAttribute:function(t,e,s,i){var a=this;if(i.disable)return!1;this.$set(this.selectIndex,[0==t?0:2],i.id);var n=this.selectIndex.join("");this.$set(s,"selectIndex",e),this.selectIndex[0]>0&&this.selectIndex[2]>0&&(this.selectSku=this.atrributeMap[n]);var o=(0==t?i.id:"")+"-"+(1==t?i.id:""),c=this.attributeList.filter(function(t){return t.indexOf(o)>-1}),r=0==t?1:0;this.productDetail.saleAttr[r].productAttributeOptionList.forEach(function(t){a.$set(t,"disable",!0)}),c.length>0&&c.forEach(function(t){var e=t.split("-")[r];a.atrributeMap[t].stock>0&&a.productDetail.saleAttr[r].productAttributeOptionList.forEach(function(t){t.id==e&&a.$set(t,"disable",!1)})})},addCartCom:function(t){var e=this;if(null==this.selectSku){this.$toast("Please Select Specification");var s=document.querySelector("#anchor");s&&s.scrollIntoView(!0)}else this.$store.dispatch("addCart",{skuCode:this.selectSku.skuCode,num:this.num}).then(function(s){e.$emit("loadIndexData"),e.$toast("Add Successfully"),t&&e.$router.push("/cart")})},addChart:function(t){this.$refs.addCart.load(t)},addCart:function(){this.addCartCom()},addCartGo:function(){this.addCartCom(!0)},shareShow:function(t){console.log(1),t||(t={spuMainImage:this.productDetail.spuMainImageList[0],spuCode:this.productDetail.spuCode,name:this.productDetail.name}),this.$store.dispatch("share",{imageUrl:[t.spuMainImage],url:"proDetail?spuCode="+t.spuCode,title:t.name}).then(function(t){})},shareHide:function(){this.shareBol=!1},backTop:function(){var t=this,e=setInterval(function(){var s=Math.floor(-t.scrollTop/5);document.documentElement.scrollTop=document.body.scrollTop=t.scrollTop+s,0===t.scrollTop&&clearInterval(e)},16)},scrollToTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,this.scrollTop>100?this.btnFlag=!0:this.btnFlag=!1},getStr:function(t){var e=t.indexOf("-");return-1!=e?t.substring(0,e-1):t},formateTime:function(t){var e=new Date;return e.setDate(e.getDate()+t),e.Format("dd/MM/yyyy")},handlerLove:function(t){var e=this,s=this.wishCode.indexOf(t.spuCode),i=-1==s;this.$store.dispatch(i?"addWish":"deleteWish",i?{type:"spu",code:t.spuCode}:{id:this.wishes.result[s].id}).then(function(t){e.$store.dispatch("myWishes")})}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"head"},[s("div",[s("a",{staticClass:"iconfont back",on:{click:t.goBack}},[t._v("  ")]),t._v(" "),s("a",{staticClass:"icon icon_manue",on:{click:function(e){return t.$emit("showDrawer")}}},[t._v(" manue ")])]),t._v(" "),s("h1",[t._v(t._s(t.productDetail.name))]),t._v(" "),s("div",{staticClass:"chartWrap"},[s("span",{staticClass:"share iconfont",on:{click:function(e){return t.shareShow()}}},[t._v("  ")]),t._v(" "),t.indexData.shoppingCartNum>0?s("span",{staticClass:"bag"},[s("em",{staticClass:"font10"},[t._v(" "+t._s(t.indexData.shoppingCartNum)+" ")])]):t._e(),t._v(" "),s("a",{staticClass:"iconfont cart",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("cart")}}},[t._v("\n        \n      ")])])]),t._v(" "),s("section",{staticClass:"detailImg",class:{timerIn:1==t.productDetail.flashType}},[s("div",{staticClass:"slideWrap"},[s("swiper",{attrs:{options:t.bannerSwiperOption}},[t._l(t.productDetail.spuMainImageList,function(t,e){return s("swiper-slide",{key:e},[s("img",{staticClass:"img",attrs:{src:t,alt:""}})])}),t._v(" "),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),t._v(" "),s("span",{class:["icon","icon_like",t.wishCode.indexOf(t.productDetail.spuCode)>-1?"active_like":""],on:{click:function(e){return t.handlerLove({spuCode:t.productDetail.spuCode})}}}),t._v(" "),1==t.productDetail.flashType?s("div",{staticClass:"downTimer"},[s("div",[t._v(t._s(t.productDetail.activeName))]),t._v(" "),s("div",[t._v("\n        Ends in\n        "),s("div",{staticClass:"timer"},["00"!=t.timer.d?[s("span",[t._v(" "+t._s(t.timer.d))]),t._v(" :\n          ")]:t._e(),t._v(" "),s("span",[t._v(" "+t._s(t.timer.h)+" ")]),t._v(" : "),s("span",[t._v(" "+t._s(t.timer.m)+" ")]),t._v(" :\n          "),s("span",[t._v(" "+t._s(t.timer.s)+" ")])],2)])]):t._e()]),t._v(" "),s("section",{staticClass:"proContent"},[s("div",{staticClass:"blocks top"},[s("p",{staticClass:"name"},[t._v("\n        "+t._s(t.productDetail.name)+"\n      ")]),t._v(" "),s("div",{staticClass:"box-flex justify-between"},[s("div",[s("p",[t.selectSku?s("span",{staticClass:"price"},[t._v("\n              "+t._s(((t.isVIP?t.selectSku.merchantPrice:t.selectSku.mallPrice)/100).toFixed(2))+"\n              AED\n            ")]):t._e(),t._v(" "),t.selectSku?t._e():s("span",{staticClass:"price"},[t._v("\n              "+t._s(t.isVIP?t.productDetail.vipPriceRange:t.productDetail.priceRange)+"\n              AED\n            ")])]),t._v(" "),s("p",[t.isVIP?s("span",{staticClass:"tips_vip"},[t._v(" VIP ")]):t._e(),t._v(" "),s("span",{staticClass:"tips_cutOff"},[t._v("\n              "+t._s(t.isVIP?t.productDetail.vipPercentage:t.productDetail.percentage)+"\n              OFF\n            ")])]),t._v(" "),s("p",[t.selectSku?s("del",[t._v(" "+t._s((t.selectSku.price/100).toFixed(2))+" AED ")]):t._e(),t._v(" "),t.selectSku?t._e():s("del",[t._v(" "+t._s(t.productDetail.priceRangeLine)+" AED ")])]),t._v(" "),s("p",{staticClass:"sign"},[1==t.productDetail.isTypeFour?s("span",[t._v(" Free Shipping ")]):t._e(),t._v(" "),1==t.productDetail.isTypeFour?s("span",[t._v(" | ")]):t._e(),t._v(" "),s("span",[t._v(" Inclusive of(VAT) ")])])]),t._v(" "),s("div",{staticClass:"starWrap",on:{click:t.commentGo}},[s("div",{staticClass:"star"},t._l(5,function(e){return s("span",{key:e,staticClass:"iconfont",class:{active:e<=t.productDetail.commentPoints}},[e+.5!=t.productDetail.commentPoints?[s("em",[t._v("  ")])]:t._e(),t._v(" "),e+.5==t.productDetail.commentPoints?s("em",{staticClass:"icon iconHalfStar"}):t._e()],2)}),0),t._v(" "),s("p",{staticClass:"blue mt5"},[t._v(t._s(t.productDetail.commentCount)+" Reviews")])])])]),t._v(" "),s("div",{staticClass:"blocks sizeChoose mt10",attrs:{id:"anchor"}},[s("div",[t._l(t.productDetail.saleAttr,function(e,i){return[s("p",{staticClass:"tittle"},[t._v("\n            "+t._s(e.name)+" "),t._e()]),t._v(" "),s("p",{staticClass:"blocks"},t._l(e.productAttributeOptionList,function(a,n){return s("a",{key:n,class:{active:n==e.selectIndex,disable:a.disable},attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.selectAttribute(i,n,e,a)}}},[t._v("\n              "+t._s(a.name)+"\n            ")])}),0)]})],2),t._v(" "),s("p",{staticClass:"tittle"},[t._v("Number")]),t._v(" "),s("div",{staticClass:"gw_num clearfix"},[s("em",{staticClass:"jian iconfont",on:{click:t.jian}},[t._v("  ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"num",attrs:{type:"number"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}}),t._v(" "),s("em",{staticClass:"add iconfont",on:{click:t.jia}},[t._v("  ")])])]),t._v(" "),s("div",{staticClass:"blocks shipto mt10"},[s("p",[t._v("\n        Ship to\n        "+t._s(t.countryCode?t.countryCode.address:t.productDetail.address)+" (\n        "),s("span",{staticClass:"blue",on:{click:function(e){return t.$router.push({path:"map",query:{type:2}})}}},[t._v("\n          Change Location\n        ")]),t._v("\n        )\n      ")]),t._v(" "),s("p",[t._v("\n        Delivered within\n        "),s("span",{staticClass:"black"},[t._v("\n          "+t._s(t.formateTime(t.latestDay||t.productDetail.latestDay))+"\n        ")])])]),t._v(" "),s("div",{staticClass:"blocks mt10 Description"},[s("p",{staticClass:"tittle"},[t._v("Description")]),t._v(" "),s("div",{staticClass:"content",class:{open:t.DescriptionOpen}},[t._v("\n        "+t._s(t.productDetail.proDetail)+"\n      ")]),t._v(" "),s("p",{class:{toggle:t.DescriptionOpen,toggleClose:!t.DescriptionOpen}},[s("span",{staticClass:"blue",on:{click:function(e){t.DescriptionOpen=!t.DescriptionOpen}}},[t._v("\n          "+t._s(t.DescriptionOpen?"Show Less":"See More")+"\n        ")])])]),t._v(" "),s("div",{staticClass:"blocks mt10 Specifications"},[s("p",{staticClass:"tittle"},[t._v("Specifications")]),t._v(" "),s("div",{staticClass:"content",class:{open:t.SpecificationsOpen}},t._l(t.productDetail.secondAttr,function(e,i){return s("p",{key:i},[s("label",[t._v(" "+t._s(e.attrName)+" ")]),t._v(" "),s("span",[t._v(" "+t._s(e.optName))])])}),0),t._v(" "),s("p",{class:{toggle:t.SpecificationsOpen,toggleClose:!t.SpecificationsOpen}},[s("span",{staticClass:"blue",on:{click:function(e){t.SpecificationsOpen=!t.SpecificationsOpen}}},[t._v("\n          "+t._s(t.SpecificationsOpen?"Show Less":"See More")+"\n        ")])])]),t._v(" "),t.productDetail.commentTen&&0!=t.productDetail.commentTen.length?s("div",{staticClass:"mt10 blocks Reviews"},[s("div",{staticClass:"box box-flex justify-between"},[t._m(0),t._v(" "),s("div",[s("a",{staticClass:"blue",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push({path:"reviewsList",query:{spuCode:t.spuCode}})}}},[t._v("\n            See All")])])]),t._v(" "),s("div",{staticClass:"content"},[s("swiper",{attrs:{options:t.reviewsSwiperOption}},t._l(t.productDetail.commentTen,function(e,i){return s("swiper-slide",{key:i},[s("div",{staticClass:"user box-flex"},[s("span",{staticClass:"userName"},[t._v(" "+t._s(e.nickName)+" ")]),t._v(" "),s("div",{staticClass:"star"},t._l(5,function(i){return s("span",{key:i,staticClass:"iconfont",class:{active:i<=e.points}},[i+.5!=e.points?[s("em",[t._v("  ")])]:t._e(),t._v(" "),i+.5==e.points?s("em",{staticClass:"icon iconHalfStar"}):t._e()],2)}),0)]),t._v(" "),s("div",{staticClass:"says"},[t._v("\n              "+t._s(e.comment)+"\n            ")])])}),1)],1)]):t._e(),t._v(" "),s("section",{staticClass:"salesWrap"},[s("div",{staticClass:"box box-flex justify-between"},[t._m(1),t._v(" "),s("div",[s("a",{staticClass:"blue",on:{click:function(e){return t.$router.push({path:"/searchResult",query:{category2Code:t.productDetail.category2Code}})}}},[t._v("\n            See All")])])]),t._v(" "),s("div",{staticClass:"commonPro",staticStyle:{"padding-bottom":"30px"}},[s("swiper",{ref:"bestShareSwiper",attrs:{options:t.commonSwiperOption},on:{click:t.chooseDetail}},t._l(t.productDetail.proListCate2,function(e,i){return s("swiper-slide",{key:i},[s("div",{staticClass:"item"},[e.percentage?s("div",{staticClass:"tips_cutOff"},[t._v("\n                "+t._s(t.isVIP?e.vipPercentage:e.percentage)+" OFF\n              ")]):t._e(),t._v(" "),s("div",{staticClass:"tips_love iconfont",class:{active:t.wishCode.indexOf(e.spuCode)>-1},on:{click:function(s){return s.stopPropagation(),t.handlerLove(e)}}},[t._v("\n                "+t._s(t.wishCode.indexOf(e.spuCode)>-1?"":"")+"\n              ")]),t._v(" "),e.sale?s("div",{staticClass:"tips_sale"}):t._e(),t._v(" "),s("img",{staticClass:"img",attrs:{src:e.spuMainImage,alt:""}})]),t._v(" "),s("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"bottomPrice"},[s("p",{staticClass:"red"},[t._v("\n                "+t._s(t.getStr(t.isVIP?e.vipPriceRange:e.priceRange))+" AED\n              ")]),t._v(" "),s("p",{staticClass:"gray"},[t._v(t._s(t.getStr(e.priceRangeLine))+" AED")]),t._v(" "),1==e.isTypeFour?s("p",[t._v("Free Shipping")]):t._e()]),t._v(" "),s("div",{staticClass:"downShare"},[s("div",{class:{active:e.share},on:{click:function(s){return t.shareShow(e)}}},[s("span",{staticClass:"share iconfont"},[t._v("  ")])]),t._v(" "),s("div",{class:{active:e.cart},on:{click:function(s){return t.addChart(e)}}},[s("span",{staticClass:"cart iconfont"},[t._v("  ")])])])])}),1)],1)])]),t._v(" "),s("div",{staticClass:"downBtnWrap"},[s("van-button",{attrs:{type:"danger"},on:{click:t.addCart}},[t._v("Add to Cart")]),t._v(" "),s("van-button",{attrs:{type:"danger"},on:{click:t.addCartGo}},[t._v("Add and Go to Cart")])],1),t._v(" "),s("share-model",{attrs:{shareBol:t.shareBol},on:{shareHide:t.shareHide,mangban:t.shareHide}}),t._v(" "),t.btnFlag?s("div",{staticClass:"go-top iconfont",on:{click:t.backTop}},[t._v("\n    \n  ")]):t._e(),t._v(" "),s("add-cart",{ref:"addCart"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"timerWrap"},[e("h3",{staticClass:"homeTittle"},[this._v("Reviews")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"timerWrap"},[e("h3",{staticClass:"homeTittle"},[this._v("Best sales of this Category")])])}]};var _=s("VU/8")(d,v,!1,function(t){s("ic8Q")},"data-v-fe37a5c4",null);e.default=_.exports},ic8Q:function(t,e){}});
//# sourceMappingURL=29.9daefc288b28c31633db.js.map